{% extends "base.html" %}

{% block head %}
{{ super() }}
<title>AP News - Natural Language Parser</title>
{% endblock %}

{% block body %}
<div class="content">
    <h1 style="text-align: center">AP News - Natural Language Parser</h1>
    <p>This application serves to demonstrate the practical use of natural language processing and machine learning libraries to analyze the news.</p>
    <p>It is limited to the Associated Press as a source because each website requires its own web scraping method. </p>
    <form style="text-align: center"  action="/" method="POST">
        <!-- name and id were previously named 'content'  -->
        <input type="text" name="NewsURL" id="NewsURL" placeholder="Enter AP News URL Here">
        <input type="submit" value="Search News">
    </form>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <ul class="errMessages">
                {% for message in messages %}
                    <li>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}
    {% if searches|length < 1 %}
    <h4 style="text-align: center">There are no saved searches. Create one by searching</h4>
    {% else %}
    <table>
        <tr>
            <th>Title</th>
            <th>URL</th>
            <th>Date</th>
            <th>Analysis</th>
            <!-- <th>Revert</th> -->
            <th>Actions</th>
        </tr>
        {% for search in searches %}
        <tr>
            <td class="title-column">{{ search.title }}</td>
            <td class="url-column"><a href="{{search.url}}" target="_blank">{{ search.url }}</a></td>
            <td>{{ search.search_datetime.date() }}</td>
            <td><a href="/article/{{search.id}}">Analyse
                <a href="/article/sentences/{{search.id}}">Sentences</a>
                <a href="/article/entities/{{search.id}}">Entities</a>
                <a href="/article/verbs/{{search.id}}">Verbs</a>
            </td>
            <!-- {% if search.analyzed == False %}
            <td>Not Analyzed</td>
            {% elif search.analyzed == True %}
            <td><a href="/reactivate/{{search.id}}"></a>Revert</td>
            {% endif %} -->
            <td>
                <a href="/delete/{{search.id}}" onclick="confirmDeletion()">Delete</a>
            </td>
        </tr>
        {% endfor %}
        
    </table>

    {% endif %}
</div>
{% endblock %}